<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Switching to Hugo :: #!/rath/bun</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Welp, I switched this website from Gatsby to Hugo.
This reminds me of my distro-hoppin&#39; days, when I used to spend nights installing different Linux distributions and then meticulously configuring them to my liking. &amp;ldquo;Oh man, I can get so much done with this distro!&amp;rdquo;, I&amp;rsquo;d say. I spent so mush time trying to find that perfect setup, that I didn&amp;rsquo;t spend much time actually using them to get things done.
Well, I guess I haven&amp;rsquo;t changed much. After writing a single post, I decided to try something else for this website. Let&amp;rsquo;s at least talk about the notable changes in a second post&amp;hellip;
" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="/posts/switching-to-hugo/" />




<link rel="stylesheet" href="/assets/style.css">






<link rel="apple-touch-icon" href="/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="Matt Rathbun" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Switching to Hugo">
<meta property="og:description" content="Welp, I switched this website from Gatsby to Hugo.
This reminds me of my distro-hoppin&#39; days, when I used to spend nights installing different Linux distributions and then meticulously configuring them to my liking. &amp;ldquo;Oh man, I can get so much done with this distro!&amp;rdquo;, I&amp;rsquo;d say. I spent so mush time trying to find that perfect setup, that I didn&amp;rsquo;t spend much time actually using them to get things done.
Well, I guess I haven&amp;rsquo;t changed much. After writing a single post, I decided to try something else for this website. Let&amp;rsquo;s at least talk about the notable changes in a second post&amp;hellip;
" />
<meta property="og:url" content="/posts/switching-to-hugo/" />
<meta property="og:site_name" content="#!/rath/bun" />

  
    <meta property="og:image" content="/img/favicon/orange.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2020-10-03 00:00:00 &#43;0000 UTC" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    #!/rath/bun
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">about me</a></li>
        
      
        
          <li><a href="https://github.com/mattbun">github</a></li>
        
      
        
          <li><a href="https://linkedin.com/in/matthewrathbun">linkedin</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">about me</a></li>
      
    
      
        <li><a href="https://github.com/mattbun">github</a></li>
      
    
      
        <li><a href="https://linkedin.com/in/matthewrathbun">linkedin</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="/posts/switching-to-hugo/">Switching to Hugo</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2020-10-03 
      </span>
    
    
    <span class="post-author">:: Matt Rathbun</span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="/tags/hugo/">hugo</a>&nbsp;
    
    #<a href="/tags/github-actions/">github-actions</a>&nbsp;
    
    #<a href="/tags/ssg/">ssg</a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <p>Welp, I switched this website from <a href="https://www.gatsbyjs.com/">Gatsby</a> to <a href="https://gohugo.io/">Hugo</a>.</p>
<p>This reminds me of my distro-hoppin' days, when I used to spend nights installing different Linux distributions and then meticulously configuring them to my liking. &ldquo;Oh man, I can get <em>so</em> much done with this distro!&rdquo;, I&rsquo;d say. I spent so mush time trying to find that perfect setup, that I didn&rsquo;t spend much time actually <em>using</em> them to get things done.</p>
<p>Well, I guess I haven&rsquo;t changed much. After writing a single post, I decided to try something else for this website. Let&rsquo;s at least talk about the notable changes in a <em>second</em> post&hellip;</p>
<h1 id="go-ing-there-with-packagejson">Go-ing There with package.json<a href="#go-ing-there-with-packagejson" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>Hugo doesn&rsquo;t need a <code>package.json</code> but I couldn&rsquo;t bring myself to delete it. Old habits die hard I guess. I added a couple things to it to make it feel worthwhile:</p>
<ul>
<li>
<p>I use <a href="https://classic.yarnpkg.com/en/docs/workspaces/">yarn workspaces</a> to install dependencies for the theme when I run <code>yarn install</code> from the repo&rsquo;s base directory. All I had to do was add this to the package.json:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#e6db74">&#34;workspaces&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> [
  <span style="color:#e6db74">&#34;themes/terminal&#34;</span>
]<span style="color:#960050;background-color:#1e0010">,</span>
</code></pre></div></li>
<li>
<p>I added <a href="https://www.npmjs.com/package/hugo-bin">this cool npm module that installs a hugo binary</a> to the dev dependencies. If I want to work on this website on a new computer, I only have to run <code>yarn install</code>!</p>
</li>
</ul>
<h1 id="github-actions-rewind-it-back">Github Actions: Rewind It Back<a href="#github-actions-rewind-it-back" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>With Gatsby, I used <a href="https://github.com/enriikke/gatsby-gh-pages-action">this action</a> to deploy it. But this time around, I felt like I had a better understanding of what was going on here. With a little help from <a href="https://medium.com/zendesk-engineering/a-github-actions-workflow-to-generate-publish-your-hugo-website-f36375e56cf7">this article</a>, I (mostly) wrote it by hand. The process is simple:</p>
<ol>
<li>Checkout the website&rsquo;s git repository</li>
<li>Run <code>yarn install</code> to install the theme&rsquo;s npm dependencies</li>
<li>Run <code>hugo</code> to build the website</li>
<li>Publish the contents of the <code>public</code> directory (where <code>hugo</code> builds to) to the <code>gh-pages</code> branch.</li>
</ol>
<p>Those <code>package.json</code> changes I mentioned earlier came in handy here. Here&rsquo;s what it looks like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">jobs</span>:
  <span style="color:#f92672">build</span>:
    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
    <span style="color:#f92672">steps</span>:
      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Checkout</span>
        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v2</span>
        <span style="color:#f92672">with</span>:
          <span style="color:#f92672">submodules</span>: <span style="color:#66d9ef">true</span>
          <span style="color:#f92672">fetch-depth</span>: <span style="color:#ae81ff">0</span>

      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Use Node.js</span>
        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/setup-node@v1</span>
        <span style="color:#f92672">with</span>:
          <span style="color:#f92672">node-version</span>: <span style="color:#ae81ff">12.</span><span style="color:#ae81ff">x</span>

      <span style="color:#75715e"># This also installs Hugo since it&#39;s in my dependencies!</span>
      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Install dependencies</span>
        <span style="color:#f92672">run</span>: <span style="color:#ae81ff">yarn install</span>

      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Build</span>
        <span style="color:#f92672">run</span>: <span style="color:#ae81ff">yarn build</span>

      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Create CNAME file</span>
        <span style="color:#f92672">run</span>: <span style="color:#ae81ff">cp CNAME public/CNAME</span>

      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Publish</span>
        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">peaceiris/actions-gh-pages@v3</span>
        <span style="color:#f92672">with</span>:
          <span style="color:#f92672">github_token</span>: <span style="color:#ae81ff">${{ secrets.GITHUB_TOKEN }}</span>
          <span style="color:#f92672">publish_dir</span>: <span style="color:#ae81ff">./public</span>
          <span style="color:#f92672">user_name</span>: <span style="color:#e6db74">&#39;github-actions[bot]&#39;</span>
          <span style="color:#f92672">user_email</span>: <span style="color:#e6db74">&#39;github-actions[bot]@users.noreply.github.com&#39;</span>
          <span style="color:#f92672">commit_message</span>: <span style="color:#ae81ff">${{ github.event.head_commit.message }}</span>
</code></pre></div><h1 id="using-timestamps-in-folder-names">Using Timestamps in Folder Names<a href="#using-timestamps-in-folder-names" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>I really like the idea of prefixing post names with <code>YYYY-MM-DD</code> so they&rsquo;re listed in date order when listed alphabetically. Like this:</p>
<pre><code>$ ls content/posts
2020-08-02-creating-this-website/
2020-10-03-switching-to-hugo/
</code></pre><p>Hugo has a way to get the creation date from those timestamps! See the <code>:filename</code> date handler <a href="https://gohugo.io/getting-started/configuration/#configure-dates">here</a>. In my <code>config.toml</code>, I have:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[<span style="color:#a6e22e">frontmatter</span>]
<span style="color:#a6e22e">date</span> = [<span style="color:#e6db74">&#34;:filename&#34;</span>, <span style="color:#e6db74">&#34;:default&#34;</span>]
</code></pre></div><p>You can also get the date that it was last updated from git by enabling <a href="https://gohugo.io/variables/git/">gitinfo</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#a6e22e">enableGitInfo</span> = <span style="color:#66d9ef">true</span>
</code></pre></div><p>I don&rsquo;t think I&rsquo;ve ever been so excited about creation and updated dates before! These changes give me the file structure I want, keep the creation dates in a single place, and make the updated dates entirely automatic! 💃</p>
<h4 id="remove-timestamp-from-title">Remove Timestamp from Title<a href="#remove-timestamp-from-title" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>At this point, if you run</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ hugo new posts/2020-10-03-switching-to-hugo
</code></pre></div><p>It gets the creation date from the folder name as expected, but the new post has the title &ldquo;2020 10 03 Switching To Hugo&rdquo;. How do I get that timestamp out of there? After plenty of trial and error, I finally came up with this template for the post archetype:</p>
<pre><code>title: &quot;{{ replace ( replaceRE &quot;^\\d+-\\d+-\\d+-&quot; &quot;&quot; .Name 1 ) &quot;-&quot; &quot; &quot; | title }}&quot;
</code></pre><p>That template removes the timestamp, then replaces hyphens with spaces, then capitalizes the first letters of each word. Note that you can nest templates with <em>parentheses</em>.</p>
<p>Now when I run the same command, the title is &ldquo;Switching To Hugo&rdquo;. Ahh much better.</p>
<h1 id="thats-all-folks">That&rsquo;s All Folks<a href="#thats-all-folks" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>That&rsquo;s it for now, we&rsquo;ll see how Hugo works out. If I switch again, I&rsquo;ll be sure to post some updates!</p>
      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        
        <span class="button next">
            <a href="/posts/how-i-made-this-website/">
                <span class="button__text">How I Made This Website</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>&copy; 2020 Matt Rathbun</span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>







  
</div>

</body>
</html>
